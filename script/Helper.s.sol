// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

import {Script} from "forge-std/Script.sol";

/*
    –û–Ω —Ä–µ—à–∞–µ—Ç –ø—Ä–æ—Å—Ç—É—é, –Ω–æ –≤–∞–∂–Ω—É—é –∑–∞–¥–∞—á—É:
    üëâ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–µ—Ç–∏.

    block.chainid ‚Äî —ç—Ç–æ ID —Ç–µ–∫—É—â–µ–π —Å–µ—Ç–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç.


    | –°–µ—Ç—å     | Chain ID | –û–ø–∏—Å–∞–Ω–∏–µ                                |
    | -------- | -------- | --------------------------------------- |
    | 11155111 | Sepolia  | Ethereum —Ç–µ—Å—Ç–æ–≤–∞—è —Å–µ—Ç—å                  |
    | 31337    | Anvil    | –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Foundry) |


    0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
    - –≠—Ç–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ Anvil (–æ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è Foundry –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ anvil).
    üî∏ –í Foundry —É anvil –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –∏ –ø–µ—Ä–≤—ã–π –∏–∑ –Ω–∏—Ö –∏–º–µ–µ—Ç –∫–∞–∫ —Ä–∞–∑ —ç—Ç–æ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á.

    –ö–æ–≥–¥–∞ Helper –Ω—É–∂–µ–Ω

    –û–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ª–µ–∑–Ω—ã–º, –∫–æ–≥–¥–∞ —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–ª –∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ (Anvil), –∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏ (Sepolia),
    –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ –¥–ª–∏–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã —Ç—ã –ø—Ä–æ—Å—Ç–æ –ø–∏—à–µ—à—å:

    forge script script/UpgradeCounter.s.sol:UpgradeCounter --broadcast --rpc-url $SEPOLIA_RPC

    –ê –≤ –∫–æ–¥–µ:

    uint256 deployerKey = _getDeployerKey();
    vm.startBroadcast(deployerKey);

    –ò —Ç–æ–≥–¥–∞:

    - –µ—Å–ª–∏ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –ª–æ–∫–∞–ª—å–Ω–æ (chainid = 31337), ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª—é—á Anvil;
    - –µ—Å–ª–∏ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –≤ Sepolia (chainid = 11155111), ‚Äî –∫–ª—é—á –±–µ—Ä—ë—Ç—Å—è –∏–∑ .env (PRIVATE_KEY=...).

    –ö–æ–≥–¥–∞ —Ç—ã –ø–µ—Ä–µ–¥–∞—ë—à—å –ø–∞—Ä–∞–º–µ—Ç—Ä:
    --private-key $PRIVATE_KEY

    Foundry –¥–µ–ª–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

    - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç.
    - –ü–æ–¥–º–µ–Ω—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ vm.startBroadcast() ‚Äî —Ç–µ–ø–µ—Ä—å –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á.
    - –ü–æ—ç—Ç–æ–º—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–¥–∞ —Ç–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞—Ç—å _getDeployerKey() –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ –≤ vm.startBroadcast().
*/
contract Helper is Script {
    function _getDeployerKey() internal view returns (uint256) {
        if (block.chainid == 11155111) { // If the script is running in the Sepolia
            return vm.envUint("PRIVATE_KEY"); // use real PRIVATE_KEY from the .env file (source ./.env should be executed before).
        } else {
            return 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80; // Anvil (from Foundry) local default private key.
        }
    }
}
